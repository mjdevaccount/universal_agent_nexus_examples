name: customer-support
version: 2.0.0
description: Minimal single-decision support router backed by MCP stubs using v3.0.1 patterns
graphs:
- name: main
  entry_node: analyze_query
  nodes:
  - id: analyze_query
    kind: router
    label: Decision Router
    router_ref: decision_router
  - id: billing_exec
    kind: tool
    label: Query Billing System
    description: null
    config: {}
    source_location: null
    metadata:
      data: {}
      _annotations: {}
    router_ref: null
    tool_ref: billing_system
  - id: technical_exec
    kind: tool
    label: Get Technical Help
    description: null
    config: {}
    source_location: null
    metadata:
      data: {}
      _annotations: {}
    router_ref: null
    tool_ref: tech_support
  - id: account_exec
    kind: tool
    label: Account Operations
    description: null
    config: {}
    source_location: null
    metadata:
      data: {}
      _annotations: {}
    router_ref: null
    tool_ref: account_service
  - id: format_response
    kind: router
    label: Format Response
    router_ref: formatter_router
  edges:
  - from_node: analyze_query
    to_node: billing_exec
    condition:
      route: "billing"
  - from_node: billing_exec
    to_node: format_response
  - from_node: analyze_query
    to_node: technical_exec
    condition:
      route: "technical"
  - from_node: technical_exec
    to_node: format_response
  - from_node: analyze_query
    to_node: account_exec
    condition:
      route: "account"
  - from_node: account_exec
    to_node: format_response
  metadata:
    data: {}
    _annotations: {}
tools:
- name: billing_system
  description: Billing database operations
  protocol: mcp
  config:
    command: python
    args:
    - servers.py
    - --server
    - billing
  input_schema: null
  output_schema: null
  metadata:
    data: {}
    _annotations: {}
- name: tech_support
  description: Technical troubleshooting steps
  protocol: mcp
  config:
    command: python
    args:
    - servers.py
    - --server
    - tech
  input_schema: null
  output_schema: null
  metadata:
    data: {}
    _annotations: {}
- name: account_service
  description: Account management actions
  protocol: mcp
  config:
    command: python
    args:
    - servers.py
    - --server
    - account
  input_schema: null
  output_schema: null
  metadata:
    data: {}
    _annotations: {}
routers:
  - name: decision_router
    strategy: llm
    system_message: |
      Classify customer issue as:
      - "billing" (payment/subscription)
      - "technical" (product problems)
      - "account" (login/access)
      
      Respond with ONE word only.
    default_model: "ollama://qwen3:8b"
  - name: formatter_router
    strategy: llm
    system_message: |
      Reply to the customer issue in a helpful, empathetic way.
      Make it clear, actionable, and professional.
    default_model: "ollama://qwen3:8b"
policies: []
metadata:
  data: {}
  _annotations: {}
