<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Innovation Waves - Technology Adoption Simulator</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', -apple-system, sans-serif;
            background: #0a0a0f;
            color: white;
            overflow: hidden;
        }
        
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(90deg, #1e3a8a, #3b82f6);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        
        .header h1 {
            font-size: 24px;
            font-weight: 700;
        }
        
        .header-stats {
            display: flex;
            gap: 24px;
            font-size: 14px;
        }
        
        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .stat-value {
            font-size: 20px;
            font-weight: bold;
            color: #fbbf24;
        }
        
        .stat-label {
            font-size: 10px;
            opacity: 0.8;
            text-transform: uppercase;
        }
        
        #canvas {
            position: fixed;
            top: 60px;
            left: 0;
            right: 280px;
            bottom: 0;
            background: radial-gradient(ellipse at center, #1a1a2e 0%, #0a0a0f 100%);
        }
        
        .sidebar {
            position: fixed;
            top: 60px;
            right: 0;
            width: 280px;
            bottom: 0;
            background: #111118;
            border-left: 1px solid #333;
            padding: 20px;
            overflow-y: auto;
        }
        
        .panel {
            background: #1a1a24;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
        }
        
        .panel h3 {
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #888;
            margin-bottom: 12px;
        }
        
        .god-btn {
            width: 100%;
            padding: 14px 16px;
            margin-bottom: 8px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .god-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        
        .god-btn.tech {
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
            color: white;
        }
        
        .god-btn.regulate {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }
        
        .god-btn.scale {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
        }
        
        .god-btn.control {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
        }
        
        .tech-list {
            max-height: 150px;
            overflow-y: auto;
        }
        
        .tech-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #333;
            font-size: 13px;
        }
        
        .tech-item:last-child {
            border-bottom: none;
        }
        
        .adoption-bar {
            width: 80px;
            height: 6px;
            background: #333;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .adoption-fill {
            height: 100%;
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            transition: width 0.3s;
        }
        
        .legend {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }
        
        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .event-log {
            max-height: 120px;
            overflow-y: auto;
            font-size: 11px;
            font-family: monospace;
        }
        
        .event {
            padding: 4px 0;
            border-bottom: 1px solid #222;
            color: #888;
        }
        
        .event.adoption { color: #22c55e; }
        .event.regulation { color: #ef4444; }
        .event.tech_drop { color: #fbbf24; }
        
        /* Canvas tooltip */
        .tooltip {
            position: fixed;
            background: rgba(0,0,0,0.9);
            border: 1px solid #444;
            border-radius: 8px;
            padding: 12px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            display: none;
            min-width: 150px;
        }
        
        .tooltip h4 {
            margin-bottom: 8px;
            color: #fbbf24;
        }
        
        .tooltip-row {
            display: flex;
            justify-content: space-between;
            margin: 4px 0;
        }
        
        /* Shockwave animation */
        .shockwave {
            position: fixed;
            border-radius: 50%;
            border: 3px solid #fbbf24;
            animation: shockwave 2s ease-out forwards;
            pointer-events: none;
        }
        
        @keyframes shockwave {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(20); opacity: 0; }
        }
        
        /* Startup overlay */
        .overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 200;
        }
        
        .overlay.hidden { display: none; }
        
        .start-panel {
            background: #1a1a24;
            border-radius: 16px;
            padding: 40px;
            text-align: center;
            max-width: 400px;
        }
        
        .start-panel h2 {
            font-size: 28px;
            margin-bottom: 16px;
        }
        
        .start-panel p {
            color: #888;
            margin-bottom: 24px;
        }
        
        .start-btn {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
            border: none;
            padding: 16px 48px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .start-btn:hover {
            transform: scale(1.05);
        }
        
        .company-count {
            margin-top: 16px;
        }
        
        .company-count input {
            width: 100px;
            padding: 8px;
            border: 2px solid #444;
            border-radius: 8px;
            background: #0a0a0f;
            color: white;
            font-size: 16px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üöÄ Innovation Waves</h1>
        <div class="header-stats">
            <div class="stat">
                <span class="stat-value" id="companyCount">0</span>
                <span class="stat-label">Companies</span>
            </div>
            <div class="stat">
                <span class="stat-value" id="techCount">0</span>
                <span class="stat-label">Technologies</span>
            </div>
            <div class="stat">
                <span class="stat-value" id="marketCap">$0B</span>
                <span class="stat-label">Market Cap</span>
            </div>
            <div class="stat">
                <span class="stat-value" id="concentration">0%</span>
                <span class="stat-label">Concentration</span>
            </div>
            <div class="stat">
                <span class="stat-value" id="fps">60</span>
                <span class="stat-label">FPS</span>
            </div>
        </div>
    </div>
    
    <canvas id="canvas"></canvas>
    
    <div class="sidebar">
        <div class="panel">
            <h3>üåü God Mode</h3>
            <button class="god-btn tech" onclick="dropTech('AI Breakthrough')">
                üöÄ Drop AI Patent
            </button>
            <button class="god-btn tech" onclick="dropTech('Quantum Computing')">
                ‚öõÔ∏è Quantum Breakthrough
            </button>
            <button class="god-btn tech" onclick="dropTech('Green Energy')">
                üå± Green Tech Patent
            </button>
            <button class="god-btn regulate" onclick="applyRegulation('anti_monopoly')">
                ‚öñÔ∏è Antitrust Law
            </button>
            <button class="god-btn regulate" onclick="applyRegulation('innovation_subsidy')">
                üí∞ Innovation Subsidy
            </button>
            <button class="god-btn scale" onclick="scaleCompanies(1000)">
                üìà Scale to 1000
            </button>
            <button class="god-btn control" id="pauseBtn" onclick="togglePause()">
                ‚è∏Ô∏è Pause
            </button>
        </div>
        
        <div class="panel">
            <h3>üìä Technologies</h3>
            <div class="tech-list" id="techList">
                <div style="color: #666; font-size: 12px;">No technologies yet. Drop one!</div>
            </div>
        </div>
        
        <div class="panel">
            <h3>üé® Legend</h3>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-dot" style="background: #22c55e;"></div>
                    <span>Innovator</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background: #3b82f6;"></div>
                    <span>Fast Follower</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background: #6b7280;"></div>
                    <span>Conservative</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background: #ef4444;"></div>
                    <span>Regulator</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background: #fbbf24;"></div>
                    <span>Has New Tech</span>
                </div>
            </div>
        </div>
        
        <div class="panel">
            <h3>üìú Event Log</h3>
            <div class="event-log" id="eventLog"></div>
        </div>
    </div>
    
    <div class="tooltip" id="tooltip">
        <h4 id="tooltipName">Company</h4>
        <div class="tooltip-row">
            <span>Type:</span>
            <span id="tooltipType">-</span>
        </div>
        <div class="tooltip-row">
            <span>Market Cap:</span>
            <span id="tooltipCap">$0</span>
        </div>
        <div class="tooltip-row">
            <span>Market Share:</span>
            <span id="tooltipShare">0%</span>
        </div>
        <div class="tooltip-row">
            <span>Innovation:</span>
            <span id="tooltipInnovation">0%</span>
        </div>
        <div class="tooltip-row">
            <span>Technologies:</span>
            <span id="tooltipTech">0</span>
        </div>
    </div>
    
    <div class="overlay" id="overlay">
        <div class="start-panel">
            <h2>üöÄ Innovation Waves</h2>
            <p>Watch technology adoption cascade through business networks. Drop patents, apply regulations, scale to 1000 companies.</p>
            <div class="company-count">
                <label>Companies: </label>
                <input type="number" id="startCompanies" value="300" min="50" max="2000">
            </div>
            <br>
            <button class="start-btn" onclick="startSimulation()">Start Simulation</button>
        </div>
    </div>
    
    <script>
        // ===== CONFIGURATION =====
        const API_URL = 'http://localhost:8889';
        const WS_URL = 'ws://localhost:8889/ws/market';
        
        // ===== STATE =====
        let canvas, ctx;
        let companies = [];
        let technologies = [];
        let ws = null;
        let paused = false;
        let lastFrameTime = 0;
        let frameCount = 0;
        let fps = 60;
        
        // Colors
        const COLORS = {
            innovator: '#22c55e',
            fast_follower: '#3b82f6',
            conservative_corp: '#6b7280',
            regulator: '#ef4444',
            adopted: '#fbbf24',
            connection: 'rgba(100, 100, 150, 0.15)',
        };
        
        // ===== INITIALIZATION =====
        function init() {
            canvas = document.getElementById('canvas');
            ctx = canvas.getContext('2d');
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // Mouse interaction
            canvas.addEventListener('mousemove', handleMouseMove);
            canvas.addEventListener('click', handleClick);
            
            // Start render loop
            requestAnimationFrame(render);
        }
        
        function resizeCanvas() {
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * window.devicePixelRatio;
            canvas.height = rect.height * window.devicePixelRatio;
            ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
        }
        
        // ===== SIMULATION CONTROL =====
        async function startSimulation() {
            const numCompanies = parseInt(document.getElementById('startCompanies').value) || 300;
            
            try {
                const response = await fetch(`${API_URL}/simulation/start`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ num_companies: numCompanies, tick_interval_ms: 100 })
                });
                
                if (response.ok) {
                    document.getElementById('overlay').classList.add('hidden');
                    connectWebSocket();
                }
            } catch (error) {
                console.error('Failed to start simulation:', error);
                // Run in demo mode without backend
                startDemoMode(numCompanies);
            }
        }
        
        function startDemoMode(numCompanies) {
            // Generate demo companies locally
            document.getElementById('overlay').classList.add('hidden');
            
            companies = [];
            const types = ['innovator', 'fast_follower', 'conservative_corp', 'regulator'];
            const typeWeights = [0.15, 0.20, 0.60, 0.05];
            
            for (let i = 0; i < numCompanies; i++) {
                let r = Math.random();
                let type = 'conservative_corp';
                let cumulative = 0;
                for (let j = 0; j < types.length; j++) {
                    cumulative += typeWeights[j];
                    if (r < cumulative) {
                        type = types[j];
                        break;
                    }
                }
                
                companies.push({
                    id: i,
                    name: `${type.substring(0, 3).toUpperCase()}-${String(i).padStart(3, '0')}`,
                    type: type,
                    market_cap: 100 * (1 + Math.random() * 5),
                    market_share: 1 / numCompanies,
                    innovation_score: Math.random(),
                    tech_stack: [],
                    x: Math.random() * (canvas.width / window.devicePixelRatio - 100) + 50,
                    y: Math.random() * (canvas.height / window.devicePixelRatio - 100) + 50,
                    vx: 0,
                    vy: 0,
                    connections: [],
                });
            }
            
            // Build connections
            companies.forEach(c => {
                const numConn = Math.min(5, Math.floor(Math.log(c.market_cap)));
                c.connections = [];
                for (let i = 0; i < numConn; i++) {
                    const target = Math.floor(Math.random() * companies.length);
                    if (target !== c.id) c.connections.push(target);
                }
            });
            
            updateStats();
            
            // Start local simulation
            setInterval(localTick, 100);
        }
        
        function localTick() {
            if (paused) return;
            
            // Diffuse technologies
            technologies.forEach(tech => {
                companies.forEach(company => {
                    if (company.tech_stack.includes(tech.id)) return;
                    
                    const threshold = company.type === 'innovator' ? 0.02 :
                                      company.type === 'fast_follower' ? 0.15 : 0.40;
                    
                    if (tech.adoption_rate >= threshold) {
                        const connectedAdopters = company.connections.filter(
                            cid => companies[cid]?.tech_stack.includes(tech.id)
                        ).length;
                        
                        if (Math.random() < 0.1 * (1 + connectedAdopters * 0.5)) {
                            company.tech_stack.push(tech.id);
                            tech.adopters++;
                            tech.adoption_rate = tech.adopters / companies.length;
                            
                            // Boost
                            company.market_cap *= 1.05;
                            
                            addEvent('adoption', `${company.name} adopted ${tech.name}`);
                        }
                    }
                });
            });
            
            // Update positions (simple physics)
            companies.forEach(company => {
                company.x += (Math.random() - 0.5) * 2;
                company.y += (Math.random() - 0.5) * 2;
                company.x = Math.max(30, Math.min(canvas.width / window.devicePixelRatio - 30, company.x));
                company.y = Math.max(30, Math.min(canvas.height / window.devicePixelRatio - 30, company.y));
            });
            
            updateStats();
            updateTechList();
        }
        
        function connectWebSocket() {
            ws = new WebSocket(WS_URL);
            
            ws.onmessage = (event) => {
                const msg = JSON.parse(event.data);
                
                if (msg.type === 'init' || msg.type === 'state') {
                    companies = msg.data.companies || [];
                    technologies = msg.data.technologies || [];
                    updateStats(msg.data.metrics);
                    updateTechList();
                    
                    if (msg.data.events) {
                        msg.data.events.forEach(e => addEvent(e.type, JSON.stringify(e)));
                    }
                } else if (msg.type === 'tech_dropped') {
                    createShockwave(canvas.width / 2, canvas.height / 2);
                    addEvent('tech_drop', `üöÄ ${msg.data.name} dropped!`);
                } else if (msg.type === 'regulation') {
                    addEvent('regulation', `‚öñÔ∏è Regulation applied: ${msg.data.type}`);
                }
            };
            
            ws.onerror = () => {
                console.log('WebSocket error, running in demo mode');
            };
        }
        
        // ===== GOD MODE ACTIONS =====
        async function dropTech(name) {
            createShockwave(canvas.width / 2, canvas.height / 2);
            
            if (ws && ws.readyState === WebSocket.OPEN) {
                ws.send(JSON.stringify({ command: 'drop_tech', name }));
            } else {
                // Local mode
                const tech = {
                    id: `tech_${technologies.length}`,
                    name: name,
                    adoption_rate: 0,
                    adopters: 0,
                };
                technologies.push(tech);
                
                // First adopter (random innovator)
                const innovators = companies.filter(c => c.type === 'innovator');
                if (innovators.length > 0) {
                    const first = innovators[Math.floor(Math.random() * innovators.length)];
                    first.tech_stack.push(tech.id);
                    tech.adopters = 1;
                    tech.adoption_rate = 1 / companies.length;
                }
                
                addEvent('tech_drop', `üöÄ ${name} dropped!`);
                updateTechList();
            }
        }
        
        async function applyRegulation(type) {
            if (ws && ws.readyState === WebSocket.OPEN) {
                ws.send(JSON.stringify({ command: 'regulate', type }));
            } else {
                // Local mode
                if (type === 'anti_monopoly') {
                    companies.forEach(c => {
                        if (c.market_share > 0.2) {
                            c.market_cap *= 0.7;
                        }
                    });
                } else if (type === 'innovation_subsidy') {
                    companies.forEach(c => {
                        if (c.market_cap < 200 && c.innovation_score > 0.5) {
                            c.market_cap *= 1.3;
                        }
                    });
                }
                addEvent('regulation', `‚öñÔ∏è ${type} applied`);
            }
        }
        
        async function scaleCompanies(count) {
            if (ws && ws.readyState === WebSocket.OPEN) {
                ws.send(JSON.stringify({ command: 'scale', count }));
            } else {
                // Local mode - add more companies
                while (companies.length < count) {
                    companies.push({
                        id: companies.length,
                        name: `NEW-${companies.length}`,
                        type: ['innovator', 'fast_follower', 'conservative_corp'][Math.floor(Math.random() * 3)],
                        market_cap: 100,
                        market_share: 0,
                        innovation_score: Math.random(),
                        tech_stack: [],
                        x: Math.random() * (canvas.width / window.devicePixelRatio),
                        y: Math.random() * (canvas.height / window.devicePixelRatio),
                        connections: [],
                    });
                }
                addEvent('scaled', `üìà Scaled to ${count} companies`);
            }
        }
        
        function togglePause() {
            paused = !paused;
            document.getElementById('pauseBtn').textContent = paused ? '‚ñ∂Ô∏è Resume' : '‚è∏Ô∏è Pause';
        }
        
        // ===== RENDERING =====
        function render(timestamp) {
            // FPS calculation
            frameCount++;
            if (timestamp - lastFrameTime >= 1000) {
                fps = frameCount;
                frameCount = 0;
                lastFrameTime = timestamp;
                document.getElementById('fps').textContent = fps;
            }
            
            const rect = canvas.getBoundingClientRect();
            ctx.clearRect(0, 0, rect.width, rect.height);
            
            if (!paused) {
                // Draw connections
                ctx.strokeStyle = COLORS.connection;
                ctx.lineWidth = 0.5;
                companies.forEach(company => {
                    company.connections?.slice(0, 3).forEach(connId => {
                        const other = companies.find(c => c.id === connId);
                        if (other) {
                            ctx.beginPath();
                            ctx.moveTo(company.x, company.y);
                            ctx.lineTo(other.x, other.y);
                            ctx.stroke();
                        }
                    });
                });
                
                // Draw companies
                companies.forEach(company => {
                    const hasTech = company.tech_stack && company.tech_stack.length > 0;
                    const baseColor = COLORS[company.type] || COLORS.conservative_corp;
                    const size = Math.max(4, Math.min(20, Math.sqrt(company.market_cap) / 2));
                    
                    // Glow for tech adopters
                    if (hasTech) {
                        ctx.beginPath();
                        ctx.arc(company.x, company.y, size + 6, 0, Math.PI * 2);
                        ctx.fillStyle = `${COLORS.adopted}40`;
                        ctx.fill();
                    }
                    
                    // Main circle
                    ctx.beginPath();
                    ctx.arc(company.x, company.y, size, 0, Math.PI * 2);
                    ctx.fillStyle = hasTech ? COLORS.adopted : baseColor;
                    ctx.fill();
                    
                    // Border
                    ctx.strokeStyle = baseColor;
                    ctx.lineWidth = 2;
                    ctx.stroke();
                });
            }
            
            requestAnimationFrame(render);
        }
        
        // ===== UI UPDATES =====
        function updateStats(metrics) {
            document.getElementById('companyCount').textContent = companies.length;
            document.getElementById('techCount').textContent = technologies.length;
            
            if (metrics) {
                document.getElementById('marketCap').textContent = `$${(metrics.total_market_cap / 1000).toFixed(1)}B`;
                document.getElementById('concentration').textContent = `${(metrics.concentration_index * 100).toFixed(1)}%`;
            } else {
                const totalCap = companies.reduce((sum, c) => sum + c.market_cap, 0);
                document.getElementById('marketCap').textContent = `$${(totalCap / 1000).toFixed(1)}B`;
            }
        }
        
        function updateTechList() {
            const container = document.getElementById('techList');
            
            if (technologies.length === 0) {
                container.innerHTML = '<div style="color: #666; font-size: 12px;">No technologies yet. Drop one!</div>';
                return;
            }
            
            container.innerHTML = technologies.map(tech => `
                <div class="tech-item">
                    <span>${tech.name}</span>
                    <div>
                        <span style="color: #fbbf24; margin-right: 8px;">${(tech.adoption_rate * 100).toFixed(0)}%</span>
                        <div class="adoption-bar">
                            <div class="adoption-fill" style="width: ${tech.adoption_rate * 100}%"></div>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        function addEvent(type, message) {
            const log = document.getElementById('eventLog');
            const event = document.createElement('div');
            event.className = `event ${type}`;
            event.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            log.insertBefore(event, log.firstChild);
            
            // Keep only last 20 events
            while (log.children.length > 20) {
                log.removeChild(log.lastChild);
            }
        }
        
        function createShockwave(x, y) {
            const wave = document.createElement('div');
            wave.className = 'shockwave';
            wave.style.left = `${x}px`;
            wave.style.top = `${y + 60}px`;
            wave.style.width = '50px';
            wave.style.height = '50px';
            wave.style.marginLeft = '-25px';
            wave.style.marginTop = '-25px';
            document.body.appendChild(wave);
            
            setTimeout(() => wave.remove(), 2000);
        }
        
        // ===== MOUSE INTERACTION =====
        let hoveredCompany = null;
        
        function handleMouseMove(event) {
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            
            hoveredCompany = null;
            
            for (const company of companies) {
                const dx = company.x - x;
                const dy = company.y - y;
                const dist = Math.sqrt(dx * dx + dy * dy);
                const size = Math.max(4, Math.min(20, Math.sqrt(company.market_cap) / 2));
                
                if (dist < size + 5) {
                    hoveredCompany = company;
                    break;
                }
            }
            
            const tooltip = document.getElementById('tooltip');
            
            if (hoveredCompany) {
                tooltip.style.display = 'block';
                tooltip.style.left = `${event.clientX + 15}px`;
                tooltip.style.top = `${event.clientY + 15}px`;
                
                document.getElementById('tooltipName').textContent = hoveredCompany.name;
                document.getElementById('tooltipType').textContent = hoveredCompany.type;
                document.getElementById('tooltipCap').textContent = `$${hoveredCompany.market_cap.toFixed(0)}M`;
                document.getElementById('tooltipShare').textContent = `${(hoveredCompany.market_share * 100).toFixed(2)}%`;
                document.getElementById('tooltipInnovation').textContent = `${(hoveredCompany.innovation_score * 100).toFixed(0)}%`;
                document.getElementById('tooltipTech').textContent = hoveredCompany.tech_stack?.length || 0;
            } else {
                tooltip.style.display = 'none';
            }
        }
        
        function handleClick(event) {
            if (hoveredCompany) {
                console.log('Selected company:', hoveredCompany);
            }
        }
        
        // Initialize on load
        window.addEventListener('load', init);
    </script>
</body>
</html>

